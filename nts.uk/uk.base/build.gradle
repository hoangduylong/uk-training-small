/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.0.1/userguide/tutorial_java_projects.html
 */

// Add content to be applied to all projects here
allprojects {
	apply plugin: 'java'
	apply plugin: 'eclipse'
	apply plugin: 'eclipse-wtp'
	
	// compileJavaとcompileTestJavaの実行時の文字コードをunicodeで指定
	// Specify run-time character code of compileJava and compileTestJava with unicode
	[compileJava, compileTestJava]*.options*.encoding = "UTF-8"

	// Build and run target Java 8
	// ビルド及び実行は、Java8を対象とする
	sourceCompatibility = "1.8"
	targetCompatibility = "1.8"
}

project (':base.web:nts.uk.com.js.web') {
	apply plugin: 'war'
	
	war {
		exclude '**/*.ts'
		exclude '**/*.js.map'
		baseName = 'nts.uk.com.js.web'
		includeEmptyDirs false
	}
	
	task tsc(type: Exec) {
		if (System.getProperty('os.name').toLowerCase(Locale.ROOT).contains('windows')) {
			commandLine 'cmd', '/c', 'tsc'
		} else {
			commandLine 'tsc'
		}
		
		args '--sourceMap', '--declaration'
		ignoreExitValue true
	}
	
	task tscw(type: Exec) {
		if (System.getProperty('os.name').toLowerCase(Locale.ROOT).contains('windows')) {
			commandLine 'cmd', '/c', 'tsc'
		} else {
			commandLine 'tsc'
		}

		args '--watch', '--sourceMap', '--declaration'
		ignoreExitValue true
	}
	
	task csc(type: Exec) {
		workingDir 'src/main/webapp/lib/nittsu/ui/style'		
		
		if (System.getProperty('os.name').toLowerCase(Locale.ROOT).contains('windows')) {
			commandLine 'cmd', '/c', 'node-sass'
		} else {
			commandLine 'node-sass'
		}

		args 'sass/base.scss', 'stylesheets/base.css', '--output-style', 'compressed', '--source-comments', 'false'
	}
	
	task cscw(type: Exec) {
		workingDir 'src/main/webapp/lib/nittsu/ui/style'		
		
		if (System.getProperty('os.name').toLowerCase(Locale.ROOT).contains('windows')) {
			commandLine 'cmd', '/c', 'node-sass'
		} else {
			commandLine 'node-sass'
		}

		args 'sass/base.scss', 'stylesheets/base.css', '--output-style', 'compressed', '--source-comments', 'false', '--watch'
	}
}